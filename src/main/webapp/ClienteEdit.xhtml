<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/templates/Patagonia/Layout.xhtml">

	<f:metadata>
		<o:viewParam name="cliente" value="#{clienteEdit.cliente}"
			converter="#{clienteConverter}" />
		<f:event listener="#{clienteEdit.preRenderView}" type="preRenderView" />
	</f:metadata>

	<ui:define name="title">#{clienteEdit.edicaoDeCliente ? 'Editar Cliente' : 'Novo Cliente'}</ui:define>
	<ui:define name="content-header">#{clienteEdit.edicaoDeCliente ? 'Editar Cliente' : 'Novo Cliente'}
		<small>#{clienteEdit.edicaoDeCliente ?
			'Cliente: '.concat(clienteEdit.cliente.nome) : 'cadastrar novo
			cliente'}</small>
	</ui:define>
	<ui:define name="breadcrumb-header">
		<li><i class="fa fa-dashboard"></i>  <a href="Home.xhtml">Dashboard</a>
		</li>
		<li><a href="#{clienteEdit.edicaoDeCliente ? 'ClienteView.xhtml' : 'Clientes.xhtml'}">#{clienteEdit.edicaoDeCliente ? 'Detalhes Cliente' : 'Clientes'}</a></li>
		<li class="active">#{clienteEdit.edicaoDeCliente ? 'Editar Cliente' : 'Novo Cliente'}</li>
	</ui:define>
	
	<ui:define name="conteudo">

		<h:form id="formRegisterCliente">
			<p:messages id="messages" autoUpdate="true"
				closable="true" />

			<p:fieldset styleClass="box box-success">
				<div class="ui-fluid">
					<p:tabView>
						<p:tab title="Dados Pessoais">
							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-1">

								<p:outputLabel for="nome" value="Nome" />
								<p:inputText id="nome" value="#{clienteEdit.cliente.nome}"
									required="true" requiredMessage="O campo nome é obrigatório!"/>

								<p:outputLabel for="cpf" value="CPF"/>
								<p:inputMask mask="999.999.999-99" id="cpf"
									value="#{clienteEdit.cliente.cpf}" required="true" requiredMessage="O campo CPF é obrigatório!">
								</p:inputMask>

								<p:outputLabel for="sexo" value="Sexo" />
								<p:selectOneRadio id="sexo" value="#{clienteEdit.cliente.sexo}"
									required="true" requiredMessage="O campo sexo é obrigatório!">
									<f:selectItem itemLabel="Masculino" itemValue="Masculino" />
									<f:selectItem itemLabel="Feminino" itemValue="Feminio" />
								</p:selectOneRadio>

								<p:outputLabel for="telefone" value="Telefone" />
								<p:inputMask mask="(99) 9999-9999" id="telefone"
									value="#{clienteEdit.cliente.telefone}" />

								<p:outputLabel for="celular" value="Celular" />
								<p:inputMask mask="(99) 99999-9999" id="celular" required="true" requiredMessage="O campo celular é obrigatório!"
									value="#{clienteEdit.cliente.celular}" />

								<p:outputLabel for="email" value="Email" />
								<p:inputText id="email" value="#{clienteEdit.cliente.email}" />
							</p:panelGrid>
						</p:tab>
						<p:tab title="Dados de Endereço">

							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-1">

								<p:outputLabel for="logradouro" value="Logradouro" />
								<p:inputText id="logradouro" required="true" requiredMessage="O campo logradouro é obrigatório!"
									value="#{clienteEdit.cliente.endereco.logradouro}"
									label="Logradouro" />
								<p:outputLabel for="numero" value="Número" />
								<p:inputText id="numero"
									value="#{clienteEdit.cliente.endereco.numero}" required="true" requiredMessage="O campo número é obrigaório!">
									<f:convertNumber integerOnly="true" />
									</p:inputText>

								<p:outputLabel for="zona" value="Zona" />
								<p:selectOneMenu id="zona" required="true" requiredMessage="O campo zona é obrigatório!"
									value="#{clienteEdit.cliente.endereco.zona}">
									<f:selectItem itemLabel="Selecione uma zona"
										noSelectionOption="true" />
									<f:selectItem itemLabel="Zona Urbana" itemValue="Zona Urbana" />
									<f:selectItem itemLabel="Zona Rural" itemValue="Zona Rural" />
								</p:selectOneMenu>

								<p:outputLabel for="bairro" value="Bairro" />
								<p:inputText id="bairro"
									value="#{clienteEdit.cliente.endereco.bairro}" required="true" requiredMessage="O campo bairro é obrigatório!"/>
								
								<p:outputLabel for="complemento" value="Complemento" />
								<p:inputText id="complemento"
									value="#{clienteEdit.cliente.endereco.complemento}" />

								<p:outputLabel for="cep" value="CEP" />
								<p:inputMask mask="99999-999" required="true" requiredMessage="O campo CEP é obrigatório!" id="cep"
									value="#{clienteEdit.cliente.endereco.cep}" size="3" />

								<p:outputLabel for="estado" value="Estado" />

								<p:selectOneMenu id="estado" required="true" requiredMessage="O campo estado é obrigatório!"
									value="#{clienteEdit.cliente.endereco.estado}">

									<f:selectItem itemLabel="Selecione um estado"
										noSelectionOption="true" />
									<f:selectItems value="#{enderecoBean.estados}"
										itemValue="#{estado}" itemLabel="#{estado.descricao}"
										var="estado" />
									<p:ajax process="@this" event="change" update="cidade"
										listener="#{clienteEdit.carregarCidades}" />
								</p:selectOneMenu>


								<p:outputLabel for="cidade" value="Cidade" />

								<p:selectOneMenu id="cidade"
									value="#{clienteEdit.cliente.endereco.cidade}" filter="true"
									filterMatchMode="startsWith" required="true" requiredMessage="O campo cidade é obrigatório!"
									disabled="#{clienteEdit.cliente.endereco.estado eq null}">
									<f:selectItem itemLabel="Selecione uma cidade"
										noSelectionOption="true" />
									<f:selectItems value="#{enderecoBean.cidades}"
										itemValue="#{cidade}" itemLabel="#{cidade}" var="cidade" />
								</p:selectOneMenu>


							</p:panelGrid>

						</p:tab>
					</p:tabView>
				</div>
				<div class="box-footer">
					<h:panelGrid columns="3">

						<p:commandButton
							value="#{clienteEdit.edicaoDeCliente ? 'Editar' : 'Salvar'}"
							id="btSave" icon="fa fa-floppy-o" style="float: left;"
							styleClass="but but-primary but-shadow but-rc"
							action="#{clienteEdit.saveCliente}" process="formRegisterCliente" />

						<p:button value="Cancelar" id="cancel" icon="fa fa-ban"
							style="float:left;" styleClass="but but-primary but-shadow but-rc"
							outcome="/Clientes.xhtml" />
					</h:panelGrid>
				</div>
			</p:fieldset>
		</h:form>
	</ui:define>
</ui:composition>