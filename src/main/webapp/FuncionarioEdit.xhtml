<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/templates/SbAdmin2/templateTeste.xhtml">

	<f:metadata>
		<o:viewParam name="funcionario" value="#{funcionarioEdit.funcionario}"
			converter="#{funcionarioConverter}" />
		<f:event listener="#{funcionarioEdit.preRenderView}"
			type="preRenderView" />
	</f:metadata>

	<ui:define name="title">#{funcionarioEdit.edicaoDeFuncionario ? 'Editar Funcionário' : 'Novo Cliente'}</ui:define>
	
	<ui:define name="content-header">#{funcionarioEdit.edicaoDeFuncionario ? 'Editar Funcionário' : 'Novo Funcionário'}
		<small>#{funcionarioEdit.edicaoDeFuncionario ?
			'Funcionário: '.concat(funcionarioEdit.funcionario.nome) : 'cadastrar
			novo funcionário'}</small>
	</ui:define>
	
	<ui:define name="breadcrumb-header">
		<li><i class="fa fa-dashboard"></i>  <a href="Home.xhtml">Dashboard</a>
		</li>
		<li><a href="#{funcionarioEdit.edicaoDeFuncionario ? 'FuncionarioView.xhtml' : 'Funcionarios.xhtml'}">#{funcionarioEdit.edicaoDeFuncionario ? 'Detalhes Funcionário' : 'Funcionários'}</a></li>
		<li class="active">#{funcionarioEdit.edicaoDeFuncionario ? 'Editar Funcionário' : 'Novo Funcionário'}</li>
	</ui:define>
	
	<ui:define name="conteudo">

		<h:form id="formRegisterFuncionario">
			<p:messages id="messages" autoUpdate="true"
				closable="true" />

			<p:fieldset styleClass="box box-success">
				<div class="ui-fluid">
					<p:tabView>
						<p:tab title="Dados Pessoais">
							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-1">

								<p:outputLabel for="nome" value="Nome" />
								<p:inputText id="nome"
									value="#{funcionarioEdit.funcionario.nome}" required="true"
									requiredMessage="O campo nome é obrigatório!" />

								<p:outputLabel for="cpf" value="CPF" />
								<p:inputMask mask="999.999.999-99" id="cpf"
									value="#{funcionarioEdit.funcionario.cpf}" required="true"
									requiredMessage="O campo CPF é obrigatório!">
								</p:inputMask>

								<p:outputLabel for="rg" value="RG" />
								<p:inputText id="rg" value="#{funcionarioEdit.funcionario.rg}"
									required="true" requiredMessage="O campo RG é obrigatório!">
									<f:convertNumber integerOnly="true" />
								</p:inputText>

								<p:outputLabel for="orgExped" value="Órgão Expedidor" />

								<p:selectOneMenu id="orgExped" required="true"
									requiredMessage="O campo órgão expedidor é obrigatório!"
									value="#{funcionarioEdit.funcionario.orgExped}" filter="true"
									filterMatchMode="startsWith">

									<f:selectItem itemLabel="Selecione um órgão expedidor"
										noSelectionOption="true" />
									<f:selectItems value="#{funcionarioBean.orgaos}" />
								</p:selectOneMenu>

								<p:outputLabel for="ctps" value="CTPS" />
								<p:inputText id="ctps"
									value="#{funcionarioEdit.funcionario.ctps}" required="true"
									requiredMessage="O campo CTPS é obrigatório!">
									<f:convertNumber integerOnly="true" />
									</p:inputText>

									<p:outputLabel for="cargo" value="Cargo" />
									<p:inputText id="cargo"
										value="#{funcionarioEdit.funcionario.cargo}" required="true"
										requiredMessage="O campo cargo é obrigatório!" />

									<p:outputLabel for="salario" value="Salario" />
									<p:inputText id="salario"
										value="#{funcionarioEdit.funcionario.salario}" required="true"
										requiredMessage="O campo salário é obrigatório!">
										<f:convertNumber integerOnly="true" />
									</p:inputText>

									<p:outputLabel for="sexo" value="Sexo" />
									<p:selectOneRadio id="sexo"
										value="#{funcionarioEdit.funcionario.sexo}" required="true"
										requiredMessage="O campo sexo é obrigatório!">
										<f:selectItem itemLabel="Masculino" itemValue="Masculino" />
										<f:selectItem itemLabel="Feminino" itemValue="Feminio" />
									</p:selectOneRadio>

									<p:outputLabel for="telefone" value="Telefone" />
									<p:inputMask mask="(99) 9999-9999" id="telefone"
										value="#{funcionarioEdit.funcionario.telefone}" />

									<p:outputLabel for="celular" value="Celular" />
									<p:inputMask mask="(99) 99999-9999" id="celular"
										required="true"
										requiredMessage="O campo celular é obrigatório!"
										value="#{funcionarioEdit.funcionario.celular}" />

									<p:outputLabel for="email" value="Email" />
									<p:inputText id="email"
										value="#{funcionarioEdit.funcionario.email}" />

									<p:outputLabel for="tipoConta" value="Tipo da conta" />
									<p:selectOneMenu id="tipoConta" required="true"
										requiredMessage="O campo tipo da conta é obrigatório!"
										value="#{funcionarioEdit.funcionario.tipoConta}">
										<f:selectItem itemLabel="Selecione o tipo da conta"
											noSelectionOption="true" />
										<f:selectItem itemLabel="Funcionário" itemValue="Funcionário" />
										<f:selectItem itemLabel="Administrador"
											itemValue="Administrador" />
									</p:selectOneMenu>
							</p:panelGrid>
						</p:tab>
						<p:tab title="Dados de Endereço">

							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-1">

								<p:outputLabel for="logradouro" value="Logradouro" />
								<p:inputText id="logradouro" required="true"
									requiredMessage="O campo logradouro é obrigatório!"
									value="#{funcionarioEdit.funcionario.endereco.logradouro}"
									label="Logradouro" />
								<p:outputLabel for="numero" value="Número" />
								<p:inputText id="numero"
									value="#{funcionarioEdit.funcionario.endereco.numero}"
									required="true" requiredMessage="O campo número é obrigatório!">
									<f:convertNumber integerOnly="true" />
								</p:inputText>

								<p:outputLabel for="zona" value="Zona" />
								<p:selectOneMenu id="zona" required="true" requiredMessage="O campo zona é obrigatório!"
									value="#{funcionarioEdit.funcionario.endereco.zona}">
									<f:selectItem itemLabel="Selecione uma zona"
										noSelectionOption="true" />
									<f:selectItem itemLabel="Zona Urbana" itemValue="Zona Urbana" />
									<f:selectItem itemLabel="Zona Rural" itemValue="Zona Rural" />
								</p:selectOneMenu>

								<p:outputLabel for="bairro" value="Bairro" />
								<p:inputText id="bairro"
									value="#{funcionarioEdit.funcionario.endereco.bairro}"
									required="true" requiredMessage="O campo bairro é obrigatório!"/>

								<p:outputLabel for="complemento" value="Complemento" />
								<p:inputText id="complemento"
									value="#{funcionarioEdit.funcionario.endereco.complemento}" />

								<p:outputLabel for="cep" value="CEP" />
								<p:inputMask mask="99999-999" required="true" requiredMessage="O campo CEP é obrigatório!" id="cep"
									value="#{funcionarioEdit.funcionario.endereco.cep}" size="3" />

								<p:outputLabel for="estado" value="Estado" />

								<p:selectOneMenu id="estado" required="true" requiredMessage="O campo estado é obrigatório!"
									value="#{funcionarioEdit.funcionario.endereco.estado}">

									<f:selectItem itemLabel="Selecione um estado"
										noSelectionOption="true" />
									<f:selectItems value="#{enderecoBean.estados}"
										itemValue="#{estado}" itemLabel="#{estado.descricao}"
										var="estado" />
									<p:ajax process="@this" event="change" update="cidade"
										listener="#{funcionarioEdit.carregarCidades}" />
								</p:selectOneMenu>


								<p:outputLabel for="cidade" value="Cidade" />

								<p:selectOneMenu id="cidade"
									value="#{funcionarioEdit.funcionario.endereco.cidade}"
									filter="true" filterMatchMode="startsWith" required="true" requiredMessage="O campo cidade é obrigatório!"
									disabled="#{funcionarioEdit.funcionario.endereco.estado eq null}">
									<f:selectItem itemLabel="Selecione uma cidade"
										noSelectionOption="true" />
									<f:selectItems value="#{enderecoBean.cidades}"
										itemValue="#{cidade}" itemLabel="#{cidade}" var="cidade" />
								</p:selectOneMenu>


							</p:panelGrid>

						</p:tab>
					</p:tabView>
				</div>
				<div class="box-footer">
					<h:panelGrid columns="3">

						<p:commandButton
							value="#{funcionarioEdit.edicaoDeFuncionario ? 'Editar' : 'Salvar'}"
							id="btSave" icon="fa fa-floppy-o" style="float: left;"
							styleClass="but but-primary but-shadow but-rc"
							action="#{funcionarioEdit.saveFuncionario}"
							process="formRegisterFuncionario" />

						<p:button value="Cancelar" id="cancel" icon="fa fa-ban"
							style="float:left;" styleClass="but but-primary but-shadow but-rc"
							outcome="/Funcionarios.xhtml" />
					</h:panelGrid>
				</div>
			</p:fieldset>
		</h:form>
	</ui:define>
</ui:composition>