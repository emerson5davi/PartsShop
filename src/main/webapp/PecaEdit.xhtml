<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/WEB-INF/templates/template.xhtml">

	<f:metadata>
		<o:viewParam name="peca" value="#{pecaEdit.peca}"
			converter="#{pecaConverter}" />
		<f:event listener="#{pecaEdit.preRenderView}" type="preRenderView" />
	</f:metadata>

	<ui:define name="title">#{pecaEdit.edicaoDePeca ? 'Editar Peça' : 'Nova Peça'}</ui:define>
	<ui:define name="content-header">#{pecaEdit.edicaoDePeca ? 'Editar Peça' : 'Nova Peça'}
		<small>#{pecaEdit.edicaoDePeca ?
			'Peca/'.concat(pecaEdit.peca.nome) : 'cadastrar nova peça'}</small>
	</ui:define>
	<ui:define name="breadcrumb-active">#{pecaEdit.edicaoDePeca ? 'Editar Peça' : 'Novo Peça'}</ui:define>
	<ui:define name="conteudo">

		<h:form id="formRegisterPeca" class="container-fluid">
			<p:messages id="messages" autoUpdate="true"
				closable="true" />

			<p:fieldset styleClass="box box-success">
				<div class="ui-fluid">
					<p:tabView>
						<p:tab title="Dados da peça">
							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank"
								columnClasses="ui-grid-col-1">

								<p:outputLabel for="nome" value="Nome" />
								<p:inputText id="nome" value="#{pecaEdit.peca.nome}"
									required="true" requiredMessage="O campo nome é obrigatório!" />

								<p:outputLabel for="descricao" value="Descrição" />
								<p:inputTextarea id="descricao"	value="#{pecaEdit.peca.descricao}"/>

								<p:outputLabel for="quantidade" value="Quantidade" />
								<p:inputText id="quantidade" value="#{pecaEdit.peca.quantidade}"
									required="true"
									requiredMessage="O campo quantidade é obrigatório!">
									<f:convertNumber integerOnly="true" />
								</p:inputText>

								<p:outputLabel for="preco" value="Preço" />
								<p:inputText id="preco" required="true"
									requiredMessage="O campo preço é obrigatório!"
									value="#{pecaEdit.peca.preco}">
									<f:convertNumber pattern="#0.00" />
								</p:inputText>

								<p:outputLabel for="validade" value="Validade" />
								<p:calendar id="validade" value="#{pecaEdit.peca.validade}"
									pattern="dd/MM/yyyy" mask="true" >
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:calendar>

								<p:outputLabel for="cor" value="Cor" />
								<p:inputText id="cor" value="#{pecaEdit.peca.cor}" />

								<p:outputLabel for="marca" value="Marca" />
								<p:inputText id="marca" value="#{pecaEdit.peca.marca}" required="true"	requiredMessage="O campo marca é obrigatório!"/>

								<p:outputLabel for="ano" value="Ano" />
								<p:inputMask mask="9999 Até 9999" id="ano" value="#{pecaEdit.peca.ano}" required="true"	requiredMessage="O campo ano é obrigatório!" />

								<p:outputLabel for="modelo" value="Modelo" />
								<p:inputText id="modelo" value="#{pecaEdit.peca.modelo}" required="true"	requiredMessage="O campo modelo é obrigatório!" />
							</p:panelGrid>
						</p:tab>
					</p:tabView>
				</div>
				<div class="box-footer">
					<h:panelGrid columns="3">

						<p:commandButton
							value="#{pecaEdit.edicaoDePeca ? 'Editar' : 'Salvar'}"
							id="btSave" icon="fa fa-floppy-o" style="float: left;"
							styleClass="btnn btnn-primary" action="#{pecaEdit.savePeca}"
							process="formRegisterPeca" />

						<p:button value="Cancelar" id="cancel" icon="fa fa-ban"
							style="float:left;" styleClass="btnn btnn-danger"
							outcome="/Pecas.xhtml" />
					</h:panelGrid>
				</div>
			</p:fieldset>
		</h:form>
	</ui:define>
</ui:composition>